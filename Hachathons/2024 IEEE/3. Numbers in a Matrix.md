
---

# Alice's Matrix Problem

Alice has **N** integer numbers between 0 and $2^M - 1$. She decided to build a matrix **A** of size **N times M**, where the *i*-th row is equal to the binary representation of the *i*-th number. 

Given the matrix **A**, Alice can perform an unlimited number of operations of the type:

- Pick any row or column and change the value of all the elements from 0 to 1, and from 1 to 0.

After performing the operations, Alice takes each row \(i\) of **A** and reinterprets it as an integer value \(V_i\) (the first column corresponds to the most significant bit).

The goal of Alice is to maximize the sum of all the **N** numbers she gets in the end. Formally, she wants to maximize the value of:

\[
\sum_{i=1}^{N} V_i
\]

---

### Standard Input

- The first line contains two integers **N** and **M**, the dimensions of **A**.
- Each of the following **N** lines contains an array of **M** integers, representing the matrix **A**. Each integer is either 0 or 1.

---

### Standard Output

- Print a single number representing the maximum sum:

\[
\sum_{i=1}^{N} V_i
\]

that you can get after performing any number of operations.

---

### Constraints and Notes:

- \( 1 \leq N, M \leq 50 \)

---

### Example

#### Input:
```
3 3
1 0 0
1 0 0
0 1 1
```

#### Output:
```
21
```

#### Explanation:
- Flip the first column:
```
0 0 0
0 0 0
1 1 1
```
- Flip the first and second row:
```
1 1 1
1 1 1
1 1 1
```
We get a sum of \(3 \times (4 + 2 + 1) = 21\).

---

## Partial Solution
```cpp
#include <iostream>
#include <vector>

using namespace std;

// Function to ensure the MSB is 1 for all rows
void MSB_rectifier(vector<vector<int>> &matrix, int N, int M)
{
    // Optimize the first column
    for (int i = 0; i < N; i++)
    {
        if (matrix[i][0] == 0)
        {
            // Flip the entire row
            for (int j = 0; j < M; j++)
            {
                matrix[i][j] = 1 - matrix[i][j];
            }
        }
    }
}

// Function to optimize the remaining columns
void column_rectifier(vector<vector<int>> &matrix, int N, int M)
{
    for (int j = 1; j < M; j++)
    {
        int ones = 0;
        int zeros = 0;
        for (int i = 0; i < N; i++)
        {
            if (matrix[i][j] == 1)
            {
                ones++;
            }
            else
            {
                zeros++;
            }
        }

        // If more zeros than ones, flip the entire column
        if (zeros > ones)
        {
            for (int i = 0; i < N; i++)
            {
                matrix[i][j] = 1 - matrix[i][j];
            }
        }
    }
}

// Function to maximize the sum
int maximizeSum(vector<vector<int>> &matrix, int N, int M)
{
    MSB_rectifier(matrix, N, M);
    column_rectifier(matrix, N, M);

    // Calculate the maximum sum
    int totalSum = 0;
    for (int i = 0; i < N; i++)
    {
        int rowValue = 0;
        for (int j = 0; j < M; j++)
        {
            rowValue = rowValue * 2 + matrix[i][j]; // Binary to decimal conversion
        }
        totalSum += rowValue;
    }

    return totalSum;
}

int main()
{
    int N, M;

    // Input dimensions of the matrix
    cin >> N >> M;

    // Initialize the matrix with the given dimensions
    vector<vector<int>> matrix(N, vector<int>(M));

    // Input the matrix
    for (int i = 0; i < N; i++)
    {
        for (int j = 0; j < M; j++)
        {
            cin >> matrix[i][j];
        }
    }

    // Output the maximum sum
    cout << maximizeSum(matrix, N, M) << endl;

    return 0;
}
```
